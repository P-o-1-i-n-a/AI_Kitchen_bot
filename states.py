# –ì–ª–æ–±–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
# –§–æ—Ä–º–∞—Ç: {chat_id: {step: str, meal_time: str, cuisine: str, diet_type: str, ingredients: str, allergies: str}}
user_states = {}

# –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –¥–∏–µ—Ç
DIET_RULES = {
    "üö´ –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π": {
        "description": "–ë–µ–∑ –¥–∏–µ—Ç–∏—á–µ—Å–∫–∏—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π",
        "forbidden": [],
        "replacements": {}
    },
    "‚ö†Ô∏è –ê–ª–ª–µ—Ä–≥–∏–∏": {
        "description": "–ò—Å–∫–ª—é—á–µ–Ω—ã —É–∫–∞–∑–∞–Ω–Ω—ã–µ –∞–ª–ª–µ—Ä–≥–µ–Ω—ã",
        "forbidden": [],  # –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–∑ user_states
        "replacements": {}
    },
    "‚öñÔ∏è –ù–∏–∑–∫–æ–∫–∞–ª–æ—Ä–∏–π–Ω—ã–µ": {
        "description": "–ú–µ–Ω–µ–µ 300 –∫–∫–∞–ª –Ω–∞ –ø–æ—Ä—Ü–∏—é",
        "forbidden": [
            "–º–∞—Å–ª–æ —Å–ª–∏–≤–æ—á–Ω–æ–µ",
            "–º–∞–π–æ–Ω–µ–∑",
            "—Å–∞–ª–æ",
            "—Å–ª–∏–≤–∫–∏",
            "—Å–∞—Ö–∞—Ä"
        ],
        "replacements": {
            "–º–∞—Å–ª–æ —Å–ª–∏–≤–æ—á–Ω–æ–µ": "–æ–ª–∏–≤–∫–æ–≤–æ–µ –º–∞—Å–ª–æ (–≤–¥–≤–æ–µ –º–µ–Ω—å—à–µ)",
            "—Å–ª–∏–≤–∫–∏": "–æ–±–µ–∑–∂–∏—Ä–µ–Ω–Ω–æ–µ –º–æ–ª–æ–∫–æ",
            "–º–∞–π–æ–Ω–µ–∑": "–≥—Ä–µ—á–µ—Å–∫–∏–π –π–æ–≥—É—Ä—Ç",
            "—Å–∞—Ö–∞—Ä": "—Å—Ç–µ–≤–∏—è/—ç—Ä–∏—Ç—Ä–∏—Ç–æ–ª"
        }
    },
    "üí™ –í—ã—Å–æ–∫–æ–±–µ–ª–∫–æ–≤—ã–µ": {
        "description": "–ù–µ –º–µ–Ω–µ–µ 20–≥ –±–µ–ª–∫–∞ –Ω–∞ –ø–æ—Ä—Ü–∏—é",
        "forbidden": [],
        "replacements": {
            "–º–∞–∫–∞—Ä–æ–Ω—ã": "–Ω—É—Ç–æ–≤–∞—è –ø–∞—Å—Ç–∞",
            "—Ä–∏—Å": "–∫–∏–Ω–æ–∞",
            "—Ö–ª–µ–±": "–ø—Ä–æ—Ç–µ–∏–Ω–æ–≤—ã–µ —Ö–ª–µ–±—Ü—ã"
        }
    },
    "‚ò™Ô∏è –•–∞–ª—è–ª—å": {
        "description": "–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∏—Å–ª–∞–º—Å–∫–∏–º –Ω–æ—Ä–º–∞–º",
        "forbidden": [
            "—Å–≤–∏–Ω–∏–Ω–∞",
            "–±–µ–∫–æ–Ω",
            "—Å–∞–ª–æ",
            "–∞–ª–∫–æ–≥–æ–ª—å",
            "–∂–µ–ª–∞—Ç–∏–Ω"
        ],
        "replacements": {
            "—Å–≤–∏–Ω–∏–Ω–∞": "–≥–æ–≤—è–¥–∏–Ω–∞/–±–∞—Ä–∞–Ω–∏–Ω–∞",
            "–±–µ–∫–æ–Ω": "–∏–Ω–¥–µ–π–∫–∞ —Ö–∞–ª—è–ª—å",
            "–∞–ª–∫–æ–≥–æ–ª—å": "–ª–∏–º–æ–Ω–Ω—ã–π —Å–æ–∫/—É–∫—Å—É—Å",
            "–∂–µ–ª–∞—Ç–∏–Ω": "–∞–≥–∞—Ä-–∞–≥–∞—Ä"
        }
    },
    "‚ò¶Ô∏è –ü–æ—Å—Ç–Ω–∞—è": {
        "description": "–ë–µ–∑ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∂–∏–≤–æ—Ç–Ω–æ–≥–æ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è",
        "forbidden": [
            "–º—è—Å–æ",
            "–∫—É—Ä–∏—Ü–∞",
            "—Ä—ã–±–∞",
            "–º–æ–ª–æ–∫–æ",
            "—Å—ã—Ä",
            "—è–π—Ü–∞",
            "—Å–ª–∏–≤–æ—á–Ω–æ–µ –º–∞—Å–ª–æ"
        ],
        "replacements": {
            "–º—è—Å–æ": "–≥—Ä–∏–±—ã/–±–∞–∫–ª–∞–∂–∞–Ω—ã",
            "–º–æ–ª–æ–∫–æ": "—Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ –º–æ–ª–æ–∫–æ",
            "—è–π—Ü–∞": "–ª—å–Ω—è–Ω–∞—è —Å–º–µ—Å—å (1 —Å—Ç.–ª. –ª—å–Ω–∞ + 3 —Å—Ç.–ª. –≤–æ–¥—ã = 1 —è–π—Ü–æ)",
            "—Å–ª–∏–≤–æ—á–Ω–æ–µ –º–∞—Å–ª–æ": "—Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ –º–∞—Å–ª–æ"
        }
    }
}

# –í–æ–∑–º–æ–∂–Ω—ã–µ —à–∞–≥–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
USER_STEPS = {
    "waiting_search_method": "–≤—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ –ø–æ–∏—Å–∫–∞",
    "waiting_dish_name": "–≤–≤–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏—è –±–ª—é–¥–∞",
    "waiting_ingredients": "–≤–≤–æ–¥ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤",
    "waiting_meal_time": "–æ–∂–∏–¥–∞–µ—Ç –≤—ã–±–æ—Ä–∞ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏–µ–º–∞ –ø–∏—â–∏",
    "waiting_cuisine": "–æ–∂–∏–¥–∞–µ—Ç –≤—ã–±–æ—Ä–∞ –∫—É—Ö–Ω–∏",
    "waiting_diet": "–æ–∂–∏–¥–∞–µ—Ç –≤—ã–±–æ—Ä–∞ –¥–∏–µ—Ç—ã",
    "waiting_allergies": "–æ–∂–∏–¥–∞–µ—Ç –≤–≤–æ–¥–∞ –∞–ª–ª–µ—Ä–≥–µ–Ω–æ–≤",
    "waiting_ingredients": "–æ–∂–∏–¥–∞–µ—Ç –≤–≤–æ–¥–∞ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤",
    "generating_recipe": "–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ä–µ—Ü–µ–ø—Ç"
}

def reset_user_state(chat_id: int):
    """–°–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""

    user_states[chat_id] = {"step": "waiting_meal_time"}
